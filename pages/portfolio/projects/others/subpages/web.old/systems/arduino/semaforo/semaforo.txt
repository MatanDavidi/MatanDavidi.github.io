//Declare some constants and variables
const int pedestrianRedPin = 8;    // pin that the red pedestrian LED is connected to
const int pedestrianYellowPin = 12; // pin that the yellow pedestrian LED is connected to
const int pedestrianGreenPin = 13;  // pin that the green pedestrian LED is connected to

const int carRedPin = 2;  // pin that the red car LED is connected to
const int carYellowPin = 4; // pin that the yellow car LED is connected to
const int carGreenPin = 7;  // pin that the green car LED is connected to

const int buttPin = 3;  //pin that the push button is connected to
const int buttLed = 5;  //pin that the LED representing the state of the push button is connected to
int buttState = LOW;  //variable that represent the state of the push button's LED (ON/OFF) - Default: OFF.



void setup() {
  
  //All pins connected to LEDs have to be set to OUTPUT. 
  pinMode(pedestrianRedPin, OUTPUT);
  pinMode(pedestrianYellowPin, OUTPUT);
  pinMode(pedestrianGreenPin, OUTPUT);
  
  pinMode(carRedPin, OUTPUT);
  pinMode(carYellowPin, OUTPUT);
  pinMode(carGreenPin, OUTPUT);
  
  //Set the pin connected to the push button to INPUT.
  pinMode(buttPin, INPUT);
  //Set the pin connected to the push button's LED to OUTPUT.
  pinMode(buttLed, OUTPUT);
}

void loop() {
  
  //CARS
  //Turn on car's red light
  digitalWrite(carRedPin, HIGH);
  //Turn on pedestrian's red light
  digitalWrite(pedestrianRedPin, HIGH);
 
  //Delay of 700 * 10 = 7000 ms
  for(int i = 0; i < 700; i++) {
  
    //10 ms of delay
    delay(10);
    
    //Check if the button is pressed
    if (digitalRead(buttPin)) {
    
      //Change state of the LED
      buttState = HIGH;
    
    }
    
    //Turn on or leave off the push button's LED.
    digitalWrite(buttLed, buttState);
    
  }
    
  //Turn on car's yellow light
  digitalWrite(carYellowPin, HIGH);
  
  //Delay of 300 * 10 = 3000 ms
  for(int i = 0; i < 300; i++) {
  
    //10 ms of delay
    delay(10);
    
    //Check if the button is pressed
    if (digitalRead(buttPin)) {
    
      //Change state of the LED
        buttState = HIGH;
    
    }
    
    //Turn on or leave off the push button's LED.
    digitalWrite(buttLed, buttState);
    
  }
  //Turn off car's red light  
  digitalWrite(carRedPin, LOW);
  //Turn off car's yellow light
  digitalWrite(carYellowPin, LOW);
  //Turn on car's green light
  digitalWrite(carGreenPin, HIGH);
  
  //Delay of 300 * 10 = 3000 ms
  for(int i = 0; i < 300; i++) {
  
    //10 ms of delay
    delay(10);
    
    //Check if the button is pressed
    if (digitalRead(buttPin)) {
    
      //Change state of the LED 
        buttState = HIGH;
    
    }
    
    //Turn on or leave off the push button's LED.
    digitalWrite(buttLed, buttState);
    
  }
    
  //Turn off car's green light
  digitalWrite(carGreenPin, LOW);
  //Turn on car's yellow light
  digitalWrite(carYellowPin, HIGH);
  
  //Delay of 300 * 10 = 3000 ms
  for(int i = 0; i < 300; i++) {
  
    //10 ms of delay
    delay(10);
    
    //Check if the button is pressed
    if (digitalRead(buttPin)) {
    
        //Change state of the LED
      buttState = HIGH;
    
    }
    
    //Turn on or leave off the push button's LED.
    digitalWrite(buttLed, buttState);
    
  }
    
  //Turn off car's yellow light
  digitalWrite(carYellowPin, LOW);
  //Turn on car's red light
  digitalWrite(carRedPin, HIGH);
  
  //Delay of 700 * 10 = 7000 ms
  for(int i = 0; i < 700; i++) {
  
  //10 ms of delay
    delay(10);
    
    //Check if the button is pressed
  if (digitalRead(buttPin)) {
    
        //Change state of the LED
    buttState = HIGH;
    
    }
    
    //Turn on or leave off the push button's LED.
    digitalWrite(buttLed, buttState);
    
  }
    
  //PEDESTRIANS

  //Check if the push button has been pushed
  if (buttState) {

    //Change the state of the push button's LED to OFF.
    buttState = LOW;
    //Turn off pedestrian's red light
    digitalWrite(pedestrianRedPin, LOW);
    //Turn on pedestrian's green light
    digitalWrite(pedestrianGreenPin, HIGH);
    
    //Turn off push button's LED
    digitalWrite(buttLed, buttState);
    
    //Delay of 20000 ms = 20s
    delay(20000);
  
    //Turn off pedestrian's green light
    digitalWrite(pedestrianGreenPin, LOW);
    //Turn on pedestrian's yellow light
    digitalWrite(pedestrianYellowPin, HIGH);
    
    //Delay of 1000 * 10 = 10000 ms
    for(int i = 0; i < 1000; i++) {
    
      //10 ms of delay
      delay(10);
      
      //Check if the button is pressed
      if (digitalRead(buttPin)) {
      
        //Change state of the LED
        buttState = HIGH;
      
      }
      //Turn on or leave off the push button's LED.
      digitalWrite(buttLed, buttState);
      
    }
     
    //Turn off pedestrian's yellow light
    digitalWrite(pedestrianYellowPin, LOW);
    
    //Check if the button is pressed
    if (digitalRead(buttPin)) {
      
      //Change state of the LED
      buttState = HIGH;
      
    }
    //Turn on or leave off the push button's LED.
    digitalWrite(buttLed, buttState);
  
  }
  
}